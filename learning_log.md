# C언어를 이용한 이미지 처리 및 MEM 파일 생성 학습 (2025-08-29)

## 1. 24비트 컬러 BMP를 8비트 그레이스케일로 변환

### 목표
컬러 이미지(`brainct_001.bmp`)를 흑백 이미지(`output_grayscale.bmp`)로 변환합니다.

### 변환 원리 (해석)
컴퓨터는 색상을 빛의 삼원색인 빨강(Red), 초록(Green), 파랑(Blue)의 조합으로 표현합니다. 24비트 컬러는 각 색상에 8비트(0~255)의 값을 주어 약 1600만 가지 색을 나타냅니다.

그레이스케일(흑백)은 이 색상 정보를 오직 밝기 정보로만 표현하는 방식입니다. 컬러를 흑백으로 바꾸기 위해, 각 색상이 사람의 눈에 얼마나 밝게 보이는지를 계산하는 **휘도(Luminance) 공식**을 사용합니다.

> **밝기(Y) = 0.299 * R + 0.587 * G + 0.114 * B**

이 공식은 사람의 눈이 초록색에 가장 민감하고 파란색에 가장 둔감한 시각적 특성을 반영하여 각 색상에 다른 가중치를 부여합니다.

### C 코드의 역할
작성된 `bmp_to_mem_converter.c` 코드는 다음 작업을 수행합니다.
1.  BMP 파일의 헤더를 읽어 이미지 정보를 확인합니다.
2.  이미지의 모든 픽셀(RGB) 데이터를 하나씩 읽어옵니다.
3.  각 픽셀에 휘도 공식을 적용하여 8비트 그레이스케일 값으로 변환합니다.
4.  변환된 픽셀 데이터와 8비트용 헤더를 사용해 새로운 흑백 BMP 파일(`output_grayscale.bmp`)을 생성합니다.

---

## 2. Verilog 시뮬레이션을 위한 MEM 파일 생성

### 목표
변환된 그레이스케일 이미지 데이터를 Verilog 하드웨어 시뮬레이션에서 메모리(BRAM 등) 초기값으로 사용할 수 있는 `.mem` 파일을 생성합니다.

### 생성 방식 (해석)
하드웨어 시뮬레이션에서 메모리를 특정 값으로 채우려면, 그 값들을 담은 텍스트 파일이 필요합니다. `.mem` 파일이 바로 그 역할을 합니다.

이미지는 픽셀의 2차원 배열이므로, 이 픽셀 데이터를 시뮬레이션 메모리에 그대로 로드하기 위해 정해진 형식의 텍스트 파일로 변환합니다.

-   **출력 파일**: `output_image.mem`
-   **형식**: 630x630개 픽셀의 밝기 값을 순서대로, 한 줄에 하나씩 16진수(Hex)로 변환하여 저장합니다. (예: 10진수 255 -> 16진수 FF)

### C 코드 로직
```c
// MEM 파일에 그레이스케일 데이터를 16진수로 쓰기
for (int i = 0; i < IMAGE_WIDTH * IMAGE_HEIGHT; i++) {
    fprintf(memOutFile, "%02X\n", grayscaleData[i]);
}
```
이 코드는 모든 픽셀을 순회하며 `fprintf` 함수를 통해 각 픽셀의 밝기 값을 두 자리 16진수 형식으로 파일에 순차적으로 씁니다.